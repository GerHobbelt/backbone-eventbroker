define(function(e,t,n){var n=require("underscore"),e=require("jquery"),t=require("backbone");return"use strict",t.EventBroker=t.EventBroker||function(){var e={},r=function(e,t,r,i){var s;return!t&&e.interests&&(t=e,e=e.interests),s=n.isFunction(e)?e():e,n.each(s,function(s,o){var u=t[s];if(!n.isFunction(u))throw new Error("method '"+e[o]+"' not found for event '"+o+"'");r[i](o,u,t)}),r},i={register:function(e,t){return e||t?r(e,t,this,"on"):this},unregister:function(e,t){return e||t?r(e,t,this,"off"):this}};return n.extend({namespace:"",get:function(r){return this.has(r)||(e[r]=n.extend({namespace:r},t.Events,i)),e[r]},has:function(t){return typeof e[t]!="undefined"},destroy:function(t){return t?this.has(t)&&(e[t].off(),delete e[t]):n.each(e,function(e,t){this.destroy(t)},this),this}},t.Events,i)}(),t.EventBroker})