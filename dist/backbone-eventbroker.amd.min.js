define(function(e,t,n){var n=require("underscore"),e=require("jquery"),t=require("backbone");return"use strict",t.EventBroker=t.EventBroker||function(){var e=t.Events.trigger,r={},i=function(e,t,r,i){var s;return!t&&e.interests&&(t=e,e=e.interests),s=n.isFunction(e)?e():e,n.each(s,function(s,o){var u=t[s];if(!n.isFunction(u))throw new Error("method '"+e[o]+"' not found for event '"+o+"'");r[i](o,u,t)}),r},s={register:function(e,t){return e||t?i(e,t,this,"on"):this},unregister:function(e,t){return e||t?i(e,t,this,"off"):this}};return n.extend({namespace:"",get:function(e){return this.has(e)||(r[e]=n.extend({namespace:e},t.Events,s)),r[e]},has:function(e){return typeof r[e]!="undefined"},destroy:function(e){return e?this.has(e)&&(r[e].off(),delete r[e]):n.each(r,function(e,t){this.destroy(t)},this),this}},t.Events,s,{trigger:function(t){if(t!==null&&t!==void 0)return e.apply(this,[].slice.call(arguments));throw new Error("Backbone.EventBroker.trigger invoked with null or undefined event")}})}(),t.EventBroker})