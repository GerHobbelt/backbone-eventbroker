define(function(e,t,n){var n=require("underscore"),e=require("jquery"),t=require("backbone");return"use strict",t.EventBroker=t.EventBroker||function(){var e={},r=function(e,t,r,i){var s,o;!t&&e.interests&&(t=e,e=e.interests);for(s in e)if(e.hasOwnProperty(s)){o=t[e[s]];if(!n.isFunction(o))throw new Error("method '"+e[s]+"' not found for event '"+s+"'");r[i](s,o,t)}return r},i={register:function(e,t){return e||t?r(e,t,this,"on"):this},unregister:function(e,t){return e||t?r(e,t,this,"off"):this}};return n.extend({namespace:"",get:function(r){return e[r]===undefined&&(e[r]=n.extend({namespace:r},t.Events,i)),e[r]},has:function(t){return e[t]!==undefined},destroy:function(t){if(!t)for(t in e)e.hasOwnProperty(t)&&this.destroy(t);else e[t]&&(e[t].off(),delete e[t]);return this}},t.Events,i)}(),t.EventBroker})